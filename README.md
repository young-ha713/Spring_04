# Spring_04  
  
  
  
  
Spring: 프레임 워크의 정의,version //기능 많음.버전별 지원하는 기능이 차이가 있다.  
>>현업은 많은 기능을 경험한 사람을 좋아할까? 절대적이지 않다  
기능이 많기 때문에 프로젝트마다 반드시 사용하는 기능을 중점으로 타겟을 잡을것이다.  
  
:di,컨테이너,컨트롤러,(컨트롤러<>서비스<>dao 관계(layer)),mvc2 패턴 가장 중심으로 이해해야한다.  
+ 인터셉터 + 추가적인 기능 구현(페이징,파일첨부)  
  
  
클라이언트 요청 > 컨트롤러(파라미터 받기 + 데이터 베이스 작업 요청,view 선택 ,세션처리)
view 선택(데이터 전달 ) > forward or redirect  
  
setAttribute : 데이터 전달할때 사용  
  
  
**세션 기능을 인터셉터에서 적용하여 로그인 하는 기능 구현  

로그인시 1)세션에 등록 여부 판단 2)세션에 로그인 정보를 저장  
>>이것을 컨트롤로에서 할것인가?이렇게 하면 어떤 불편한 점이 있을까?  
권한이 있는 기능을 구현,글쓰기는 로그인한 사람만, 글 보기는 아무나,글 자세히 보기도 로그인한 사람만
  
불편한점 : 서비스를 먼저 처리해준다고 하고 세션 등록 여부 판단을 매번 해야한다<코드중복>  
개선한다면 컨트롤러에 서비스를 처리해 주기 전에 로그인 검사를 한 후 컨트롤러가 서비스를 처리해 준다.  
인터셉터는 컨트롤러에 처리하기 전이나 후에 동작하는것.대부분 컨트롤러 처리전에 많이 사용한다  
  
이전 구조라면  
클라이언트 요청 > 컨트롤러(파라미터 받기 + 데이터 베이스 작업 요청,view 선택 ,세션처리)
view 선택(데이터 전달 ) > forward or redirect  
  
이후  
클라이언트 요청 > 인터셉터 > 컨트롤러(파라미터 받기 + 데이터 베이스 작업 요청,view 선택 ,세션처리)
view 선택(데이터 전달 ) > forward or redirect  
  
  
객체로 받고 리퀘스트 파람으로 받고 http서블랫으로 파라미터 받음  
디비작업은 컨트롤러 서비스 디비로 함  
  
  
세션 : 웹 서버가 갖고 있는 저장공간, 클라이언트의 정보를 저장한다.  
      이 저장공간을 활용하여 로그인같은 기능을 구현할 수 있다 . 세션 = 로그인이 아닙니다 주의.보안적 측면에선 세션이 나음  
쿠키 : 세션과 비슷하지만 가장 큰 차이는 쿠키는 웹 서버가 만들고 클라이언트가 보관한다.  
      >>웹 서비스는 요청> 처리(쿠키값id과 세션에 저장된 쿠키 id값을 비교해서 이전 사용자인지 판별..  
      만약 서버에 쿠키 아이디가 없다면 서버는 쿠키를 만들어서 클라이언트에게 보내고 서버에  
      쿠키 아이디가 있다면 접속시간 같은 정보를 갱신하여 클라이언트에게 전송한다.)  
      즉 쿠키는 웹 브라우져에서 저장하고 있다.  
      (statefull vs stateless)  
  
      statefull : 세션이 종료될때 (더이상 클라이언트가 서비스를 이용하지 않는다. 로그아웃같은 경우 )  
                  까지 클라이언트의 정보를 저장하고 있다.(쿠키값 같은것)  
                  첫번째 접속하면 서버가 쿠키를 만들어서 클라이언트에게 주고 후속되는 연결시에 쿠키값을 갖고 서버로 온다..  
  
  
     stateless: 요청에 대한 응답만 한다.선행되는 작업이 후속으로 따라오는 작업과 전혀 연관성이 없다  
                rest api = 클라이언트 요청에 의미를 부여하는것 get: 조회라는 의미 post:insert라는 의미  
                           화면을 분할시켜서 동작을 시킬 수 있다.(비동기식 방식을 사용하면 가능) 
                           rest api 비동기식을 많이 응용해서 개발한다.  
  
  
  
  
  
  
>>이런 습관과 능력이 회사에서 요구하는 80% 이상이다.  
  
  
<추가> 스프링 시큐리티 (어려움 별 다섯개임..):보안적 이슈를 제공  
  
-----------------------------------------------------
다양한 api(다른 프로젝트에서 사용할 수 있도록 인터페이스를 제공.  
쉽게 말해 함수 사용해서 다른 프로젝트에서 제공되는 서비스 사용)사용법  
예)네이버 로그인 기능 가져다 구현하기 (json생각나야함 : 객체,하나의 변수로 여러개의 변수를 표현)  
  위치 가져와서 지도에 표현하기  
  
----------------------------------  
AOP : 관점지향 프로그래밍(주 로직, 보조로직,미리 규칙을 만든다)  
      주 로직이 특정 시점에서 실행될때 보조 로직이 동작하도록 미리 설정  
      주 로직은 자기일에 집중할 수 있다. 부수적인 작업을 할 필요가 없다)  
  
  
Spring > Spring boot(프로젝트 후 유튜브를 보면 좋겠다) > node.js , react(비동기랑 관련있긔)  
          프로젝트가 없어도 되지만 질문이 나올 수 있다..  
          

  

  
  
maven:프로젝트 관리,라이브러리 관리 방법,디렉토리 구조 이해  
  
mybatis : verstion,정의 기억해야한다.(프레임워크),dao와 쿼리를 매핑하는 구조이다.sqlSession,sessionFactory,DataSource    
tomcat:웹서버 :서버가 갖고있는 데이터로 응답해주는 구조  
        was :서버가 다른 시스템(디비)에 데이터를 요청하고 이를 응답받아서 처리해주는 구조  
        톰캣은 위의 두가지를 다 가지고 있고 8.5사용했습니다.  
java :version,버전에 따라 제공하는 문법이 있습니다.8버전으로 가장 많이 개발을 했습니다.제네릭!  
oracle :version,관계형 데이터 베이스..sqldeveloper는 db가 아니라 응용 소프트웨어임!!!!  
        오라클의 특징,ddl(create drop alter),dml(c r u d),dcl(commit rollback checkpoint) 기억  
                                                          >트렌젝션을 보장하기 위한것(계정관리)  
트렌젝션은 한 가지 일을 하고 있을때 이 일이 온전하게 마무리 되는것을 보장..  
예) 은행에서 돈을 출금할때 갑자기 정전이 일어남. 돈은 못 받음.. 이럴때 commit or rollback?  
이런게 트렌젝션  
  
+ dcl은 create user(계정생성)과 권한 부여(grant)가 있다.권한회수(revoke)  
+ ddl은 table view index 기본키 외래키 관리   
+ dml은 테이블 조작(select 절의 구조 ,조인,서브쿼리,함수,트리거,프로시져)  
  
  
  
  
  
  
  
  
  
-------------------------------------------------  
###실습  
  
  
  
  
![image](https://user-images.githubusercontent.com/80766275/204420688-c1e2f2ea-9d0f-4d30-9006-5f07be354166.png)  
  
서블릿컨텍스트는 스프링 전체  
일부분은 루트컨텍스트  

  
  
  
  
  
  
![image](https://user-images.githubusercontent.com/80766275/204447674-2110659e-663d-49ee-8684-c0f0e8ce3bc9.png)
